<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Choice Vote - Ìà¨Ìëú ÏãúÏä§ÌÖú</title>
    <link href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --option-a-color: #6366f1;
            --option-a-light: #818cf8;
            --option-a-glow: rgba(99, 102, 241, 0.3);
            --option-b-color: #ec4899;
            --option-b-light: #f472b6;
            --option-b-glow: rgba(236, 72, 153, 0.3);
            --bg-dark: #0a0a0f;
            --bg-card: #16161f;
            --bg-sidebar: #111118;
            --text-primary: #ffffff;
            --text-secondary: #a0a0b0;
            --border-color: rgba(255,255,255,0.08);
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            overflow: hidden;
        }

        /* Main Layout */
        .app-container {
            display: flex;
            height: 100vh;
        }

        /* Sidebar - Ìà¨Ìëú Î™©Î°ù */
        .sidebar {
            width: 280px;
            background: var(--bg-sidebar);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .sidebar-header h1 {
            font-family: 'Black Han Sans', sans-serif;
            font-size: 1.4rem;
            background: linear-gradient(135deg, var(--option-a-light), var(--option-b-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
        }

        .btn-new-vote {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, var(--option-a-color), var(--option-b-color));
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-new-vote:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(99, 102, 241, 0.4);
        }

        .vote-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        .vote-list-item {
            padding: 15px;
            background: var(--bg-card);
            border-radius: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .vote-list-item:hover {
            border-color: var(--option-a-color);
        }

        .vote-list-item.active {
            border-color: var(--option-a-light);
            background: rgba(99, 102, 241, 0.1);
        }

        .vote-list-title {
            font-weight: 600;
            font-size: 0.95rem;
            margin-bottom: 8px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .vote-list-options {
            display: flex;
            gap: 8px;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .vote-list-options span {
            padding: 3px 8px;
            background: rgba(255,255,255,0.05);
            border-radius: 4px;
        }

        .vote-list-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .empty-list {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
        }

        .empty-list-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 25px;
        }

        .content-wrapper {
            max-width: 900px;
            margin: 0 auto;
        }

        /* Vote Header */
        .vote-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .vote-question {
            font-family: 'Black Han Sans', sans-serif;
            font-size: clamp(1.5rem, 4vw, 2rem);
            margin-bottom: 10px;
            color: var(--text-primary);
        }

        .vote-date {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Vote Cards */
        .vote-cards-wrapper {
            position: relative;
            margin-bottom: 25px;
        }

        .vote-cards {
            display: flex;
            gap: 15px;
        }

        .vote-card {
            flex: 1;
            background: var(--bg-card);
            border-radius: 16px;
            padding: 25px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .vote-card.option-a:hover {
            border-color: var(--option-a-color);
            transform: translateY(-3px);
        }

        .vote-card.option-b:hover {
            border-color: var(--option-b-color);
            transform: translateY(-3px);
        }

        .vote-card-icon {
            font-size: 3.5rem;
            margin-bottom: 12px;
            display: block;
        }

        .vote-card-title {
            font-family: 'Black Han Sans', sans-serif;
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .vote-card.option-a .vote-card-title {
            color: var(--option-a-light);
        }

        .vote-card.option-b .vote-card-title {
            color: var(--option-b-light);
        }

        .vote-card-count {
            font-size: 2.5rem;
            font-weight: 700;
            line-height: 1;
        }

        .vote-card.option-a .vote-card-count {
            color: var(--option-a-light);
        }

        .vote-card.option-b .vote-card-count {
            color: var(--option-b-light);
        }

        .vote-card-percent {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        .vote-card-hint {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 12px;
            opacity: 0.7;
        }

        .vs-badge {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--option-a-color), var(--option-b-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Black Han Sans', sans-serif;
            font-size: 1rem;
            color: white;
            z-index: 10;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        }

        /* Progress Bar */
        .progress-section {
            margin-bottom: 30px;
        }

        .progress-bar {
            height: 40px;
            background: var(--bg-card);
            border-radius: 20px;
            overflow: hidden;
            display: flex;
        }

        .progress-fill {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9rem;
            transition: width 0.5s ease;
        }

        .progress-fill.option-a {
            background: linear-gradient(90deg, var(--option-a-color), var(--option-a-light));
        }

        .progress-fill.option-b {
            background: linear-gradient(90deg, var(--option-b-light), var(--option-b-color));
        }

        .total-votes {
            text-align: center;
            margin-top: 12px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Comments Section - Ï¢åÏö∞ Î∂ÑÎ¶¨ */
        .comments-section {
            display: flex;
            gap: 20px;
        }

        .comments-column {
            flex: 1;
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            min-height: 300px;
        }

        .comments-column.option-a {
            border-top: 3px solid var(--option-a-color);
        }

        .comments-column.option-b {
            border-top: 3px solid var(--option-b-color);
        }

        .comments-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        .comments-header-icon {
            font-size: 1.5rem;
        }

        .comments-header-title {
            font-family: 'Black Han Sans', sans-serif;
            font-size: 1.1rem;
        }

        .comments-column.option-a .comments-header-title {
            color: var(--option-a-light);
        }

        .comments-column.option-b .comments-header-title {
            color: var(--option-b-light);
        }

        .comments-header-count {
            margin-left: auto;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .comments-list {
            max-height: 350px;
            overflow-y: auto;
        }

        .comment-item {
            padding: 12px;
            background: rgba(255,255,255,0.03);
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .comment-item:last-child {
            margin-bottom: 0;
        }

        .comment-name {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 4px;
        }

        .comments-column.option-a .comment-name {
            color: var(--option-a-light);
        }

        .comments-column.option-b .comment-name {
            color: var(--option-b-light);
        }

        .comment-text {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 6px;
        }

        .comment-date {
            font-size: 0.7rem;
            color: var(--text-secondary);
            opacity: 0.7;
        }

        .empty-comments {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Welcome Screen */
        .welcome-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            padding: 40px;
        }

        .welcome-icon {
            font-size: 5rem;
            margin-bottom: 20px;
        }

        .welcome-title {
            font-family: 'Black Han Sans', sans-serif;
            font-size: 2rem;
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--option-a-light), var(--option-b-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .welcome-text {
            color: var(--text-secondary);
            font-size: 1rem;
            margin-bottom: 30px;
        }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.85);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 30px;
            width: 100%;
            max-width: 450px;
            animation: modalIn 0.3s ease;
        }

        @keyframes modalIn {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .modal-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .modal-icon {
            font-size: 3.5rem;
            margin-bottom: 10px;
        }

        .modal-title {
            font-family: 'Black Han Sans', sans-serif;
            font-size: 1.4rem;
        }

        .modal.option-a .modal-title {
            color: var(--option-a-light);
        }

        .modal.option-b .modal-title {
            color: var(--option-b-light);
        }

        .modal.new-vote .modal-title {
            background: linear-gradient(135deg, var(--option-a-light), var(--option-b-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .form-group {
            margin-bottom: 18px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 14px;
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            background: rgba(255,255,255,0.05);
            color: var(--text-primary);
            font-size: 1rem;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: rgba(255,255,255,0.3);
        }

        .form-group textarea {
            resize: none;
            height: 70px;
        }

        .form-row {
            display: flex;
            gap: 12px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .emoji-picker {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .emoji-btn {
            width: 40px;
            height: 40px;
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            background: rgba(255,255,255,0.05);
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .emoji-btn:hover {
            border-color: rgba(255,255,255,0.3);
        }

        .emoji-btn.selected {
            border-color: var(--option-a-light);
            background: rgba(99, 102, 241, 0.2);
        }

        .modal-buttons {
            display: flex;
            gap: 12px;
            margin-top: 25px;
        }

        .btn {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-cancel {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
        }

        .btn-cancel:hover {
            background: rgba(255,255,255,0.15);
        }

        .btn-submit {
            color: white;
        }

        .modal.option-a .btn-submit {
            background: linear-gradient(135deg, var(--option-a-color), var(--option-a-light));
        }

        .modal.option-b .btn-submit {
            background: linear-gradient(135deg, var(--option-b-color), var(--option-b-light));
        }

        .modal.new-vote .btn-submit {
            background: linear-gradient(135deg, var(--option-a-color), var(--option-b-color));
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        .btn-delete {
            background: rgba(220, 38, 38, 0.2);
            color: #ef4444;
        }

        .btn-delete:hover {
            background: rgba(220, 38, 38, 0.3);
        }

        /* Mobile Toggle */
        .mobile-toggle {
            display: none;
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--option-a-color), var(--option-b-color));
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.2);
            border-radius: 3px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: -280px;
                top: 0;
                bottom: 0;
                z-index: 200;
                transition: left 0.3s ease;
            }

            .sidebar.open {
                left: 0;
            }

            .sidebar-backdrop {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.5);
                z-index: 150;
            }

            .sidebar-backdrop.open {
                display: block;
            }

            .mobile-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .main-content {
                padding: 20px 15px;
            }

            .vote-cards {
                flex-direction: row;
                gap: 10px;
            }

            .vote-card {
                padding: 20px 15px;
            }

            .vote-card-icon {
                font-size: 2.5rem;
            }

            .vote-card-title {
                font-size: 1.2rem;
            }

            .vote-card-count {
                font-size: 2rem;
            }

            .comments-section {
                flex-direction: column;
            }

            .comments-column {
                min-height: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar - Ìà¨Ìëú Î™©Î°ù -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1>üó≥Ô∏è Choice Vote</h1>
                <button class="btn-new-vote" id="btn-new-vote">
                    <span>‚ûï</span> Ïã†Í∑ú Ìà¨Ìëú ÎßåÎì§Í∏∞
                </button>
            </div>
            <div class="vote-list" id="vote-list">
                <!-- Ìà¨Ìëú Î™©Î°ùÏù¥ Ïó¨Í∏∞ Î†åÎçîÎßÅÎê® -->
            </div>
        </aside>

        <!-- Mobile Backdrop -->
        <div class="sidebar-backdrop" id="sidebar-backdrop"></div>

        <!-- Main Content -->
        <main class="main-content" id="main-content">
            <!-- Ìà¨Ìëú ÏÉÅÏÑ∏ ÎòêÎäî Ïõ∞Ïª¥ Ïä§ÌÅ¨Î¶∞Ïù¥ Ïó¨Í∏∞ Î†åÎçîÎßÅÎê® -->
        </main>

        <!-- Mobile Toggle Button -->
        <button class="mobile-toggle" id="mobile-toggle">üìã</button>
    </div>

    <!-- Vote Modal -->
    <div class="modal-overlay" id="vote-modal-overlay">
        <div class="modal" id="vote-modal">
            <div class="modal-header">
                <div class="modal-icon" id="vote-modal-icon">üó≥Ô∏è</div>
                <h2 class="modal-title" id="vote-modal-title">Ìà¨ÌëúÌïòÍ∏∞</h2>
            </div>
            <div class="form-group">
                <label for="voter-name">Ïù¥Î¶Ñ (ÎãâÎÑ§ÏûÑ)</label>
                <input type="text" id="voter-name" placeholder="Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" maxlength="20">
            </div>
            <div class="form-group">
                <label for="voter-comment">ÌïúÎßàÎîî (ÏÑ†ÌÉù)</label>
                <textarea id="voter-comment" placeholder="Ïôú Ïù¥ ÏÑ†ÌÉùÏùÑ ÌïòÏÖ®ÎÇòÏöî?" maxlength="100"></textarea>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-cancel" id="vote-cancel">Ï∑®ÏÜå</button>
                <button class="btn btn-submit" id="vote-submit">Ìà¨ÌëúÌïòÍ∏∞</button>
            </div>
        </div>
    </div>

    <!-- New Vote Modal -->
    <div class="modal-overlay" id="new-vote-modal-overlay">
        <div class="modal new-vote" id="new-vote-modal">
            <div class="modal-header">
                <div class="modal-icon">üó≥Ô∏è</div>
                <h2 class="modal-title">Ïã†Í∑ú Ìà¨Ìëú ÎßåÎì§Í∏∞</h2>
            </div>
            <div class="form-group">
                <label for="vote-question">ÏßàÎ¨∏</label>
                <input type="text" id="vote-question" placeholder="Ïòà: ÎãπÏã†ÏùÄ Ïñ¥ÎîîÎ•º Ï¢ãÏïÑÌï©ÎãàÍπå?" maxlength="50">
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="option-a-name">ÏÑ†ÌÉùÏßÄ A</label>
                    <input type="text" id="option-a-name" placeholder="Ïòà: Î∞îÎã§" maxlength="20">
                </div>
                <div class="form-group">
                    <label for="option-b-name">ÏÑ†ÌÉùÏßÄ B</label>
                    <input type="text" id="option-b-name" placeholder="Ïòà: ÏÇ∞" maxlength="20">
                </div>
            </div>
            <div class="form-group">
                <label>ÏïÑÏù¥ÏΩò ÏÑ†ÌÉù (ÏÑ†ÌÉùÏßÄ A / B)</label>
                <div class="form-row">
                    <div class="emoji-picker" id="emoji-picker-a">
                        <button type="button" class="emoji-btn selected" data-emoji="üèñÔ∏è">üèñÔ∏è</button>
                        <button type="button" class="emoji-btn" data-emoji="üåä">üåä</button>
                        <button type="button" class="emoji-btn" data-emoji="üçú">üçú</button>
                        <button type="button" class="emoji-btn" data-emoji="‚òï">‚òï</button>
                        <button type="button" class="emoji-btn" data-emoji="üê∂">üê∂</button>
                        <button type="button" class="emoji-btn" data-emoji="üçï">üçï</button>
                    </div>
                    <div class="emoji-picker" id="emoji-picker-b">
                        <button type="button" class="emoji-btn selected" data-emoji="‚õ∞Ô∏è">‚õ∞Ô∏è</button>
                        <button type="button" class="emoji-btn" data-emoji="üèîÔ∏è">üèîÔ∏è</button>
                        <button type="button" class="emoji-btn" data-emoji="üç≤">üç≤</button>
                        <button type="button" class="emoji-btn" data-emoji="üçµ">üçµ</button>
                        <button type="button" class="emoji-btn" data-emoji="üê±">üê±</button>
                        <button type="button" class="emoji-btn" data-emoji="üçî">üçî</button>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-cancel" id="new-vote-cancel">Ï∑®ÏÜå</button>
                <button class="btn btn-submit" id="new-vote-submit">ÎßåÎì§Í∏∞</button>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // Vote System App
        // ============================================
        class VoteApp {
            constructor() {
                this.polls = [];
                this.currentPollId = null;
                this.currentVoteOption = null;
                this.selectedEmojiA = 'üèñÔ∏è';
                this.selectedEmojiB = '‚õ∞Ô∏è';
                
                this.loadData();
                this.bindEvents();
                this.render();
                
                // ÏÉòÌîå Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏúºÎ©¥ Í∏∞Î≥∏ Ìà¨Ìëú ÏÉùÏÑ±
                if (this.polls.length === 0) {
                    this.createDefaultPolls();
                }
            }

            // Í∏∞Î≥∏ Ìà¨Ìëú ÏÉùÏÑ±
            createDefaultPolls() {
                const defaultPolls = [
                    {
                        id: Date.now(),
                        question: 'ÏßúÏû•Î©¥ vs Ïß¨ÎΩï',
                        optionA: { name: 'ÏßúÏû•Î©¥', icon: 'üçú' },
                        optionB: { name: 'Ïß¨ÎΩï', icon: 'üç≤' },
                        votes: [],
                        createdAt: Date.now()
                    },
                    {
                        id: Date.now() + 1,
                        question: 'ÎãπÏã†ÏùÄ Ïñ¥ÎîîÎ•º Ï¢ãÏïÑÌï©ÎãàÍπå?',
                        optionA: { name: 'Î∞îÎã§', icon: 'üèñÔ∏è' },
                        optionB: { name: 'ÏÇ∞', icon: '‚õ∞Ô∏è' },
                        votes: [],
                        createdAt: Date.now() + 1
                    }
                ];
                
                this.polls = defaultPolls;
                this.currentPollId = defaultPolls[0].id;
                this.saveData();
                this.render();
            }

            // Îç∞Ïù¥ÌÑ∞ Î°úÎìú
            loadData() {
                try {
                    const saved = localStorage.getItem('voteAppData');
                    if (saved) {
                        const data = JSON.parse(saved);
                        this.polls = data.polls || [];
                        this.currentPollId = data.currentPollId || null;
                    }
                } catch (e) {
                    console.error('Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïã§Ìå®:', e);
                }
            }

            // Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
            saveData() {
                try {
                    localStorage.setItem('voteAppData', JSON.stringify({
                        polls: this.polls,
                        currentPollId: this.currentPollId
                    }));
                } catch (e) {
                    console.error('Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû• Ïã§Ìå®:', e);
                }
            }

            // Ïù¥Î≤§Ìä∏ Î∞îÏù∏Îî©
            bindEvents() {
                // Ïã†Í∑ú Ìà¨Ìëú Î≤ÑÌäº
                document.getElementById('btn-new-vote').addEventListener('click', () => {
                    this.openNewVoteModal();
                });

                // Ïã†Í∑ú Ìà¨Ìëú Î™®Îã¨ Ïù¥Î≤§Ìä∏
                document.getElementById('new-vote-cancel').addEventListener('click', () => {
                    this.closeNewVoteModal();
                });
                
                document.getElementById('new-vote-submit').addEventListener('click', () => {
                    this.createNewPoll();
                });
                
                document.getElementById('new-vote-modal-overlay').addEventListener('click', (e) => {
                    if (e.target.id === 'new-vote-modal-overlay') {
                        this.closeNewVoteModal();
                    }
                });

                // Ïù¥Î™®ÏßÄ ÏÑ†ÌÉù
                document.getElementById('emoji-picker-a').addEventListener('click', (e) => {
                    if (e.target.classList.contains('emoji-btn')) {
                        document.querySelectorAll('#emoji-picker-a .emoji-btn').forEach(btn => btn.classList.remove('selected'));
                        e.target.classList.add('selected');
                        this.selectedEmojiA = e.target.dataset.emoji;
                    }
                });
                
                document.getElementById('emoji-picker-b').addEventListener('click', (e) => {
                    if (e.target.classList.contains('emoji-btn')) {
                        document.querySelectorAll('#emoji-picker-b .emoji-btn').forEach(btn => btn.classList.remove('selected'));
                        e.target.classList.add('selected');
                        this.selectedEmojiB = e.target.dataset.emoji;
                    }
                });

                // Ìà¨Ìëú Î™®Îã¨ Ïù¥Î≤§Ìä∏
                document.getElementById('vote-cancel').addEventListener('click', () => {
                    this.closeVoteModal();
                });
                
                document.getElementById('vote-submit').addEventListener('click', () => {
                    this.submitVote();
                });
                
                document.getElementById('vote-modal-overlay').addEventListener('click', (e) => {
                    if (e.target.id === 'vote-modal-overlay') {
                        this.closeVoteModal();
                    }
                });

                document.getElementById('voter-name').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.submitVote();
                });

                // Î™®Î∞îÏùº ÌÜ†Í∏Ä
                document.getElementById('mobile-toggle').addEventListener('click', () => {
                    document.getElementById('sidebar').classList.toggle('open');
                    document.getElementById('sidebar-backdrop').classList.toggle('open');
                });

                document.getElementById('sidebar-backdrop').addEventListener('click', () => {
                    document.getElementById('sidebar').classList.remove('open');
                    document.getElementById('sidebar-backdrop').classList.remove('open');
                });
            }

            // Î†åÎçîÎßÅ
            render() {
                this.renderPollList();
                this.renderMainContent();
            }

            // Ìà¨Ìëú Î™©Î°ù Î†åÎçîÎßÅ
            renderPollList() {
                const container = document.getElementById('vote-list');
                
                if (this.polls.length === 0) {
                    container.innerHTML = `
                        <div class="empty-list">
                            <div class="empty-list-icon">üì≠</div>
                            <p>ÏïÑÏßÅ Ìà¨ÌëúÍ∞Ä ÏóÜÏäµÎãàÎã§.<br>Ï≤´ Î≤àÏß∏ Ìà¨ÌëúÎ•º ÎßåÎì§Ïñ¥Î≥¥ÏÑ∏Ïöî!</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = this.polls.map(poll => {
                    const votesA = poll.votes.filter(v => v.option === 'a').length;
                    const votesB = poll.votes.filter(v => v.option === 'b').length;
                    const total = votesA + votesB;
                    const isActive = poll.id === this.currentPollId;
                    
                    return `
                        <div class="vote-list-item ${isActive ? 'active' : ''}" data-poll-id="${poll.id}">
                            <div class="vote-list-title">${this.escapeHtml(poll.question)}</div>
                            <div class="vote-list-options">
                                <span>${poll.optionA.icon} ${this.escapeHtml(poll.optionA.name)}</span>
                                <span>${poll.optionB.icon} ${this.escapeHtml(poll.optionB.name)}</span>
                            </div>
                            <div class="vote-list-stats">
                                <span>Ï¥ù ${total}Ìëú</span>
                                <span>${this.formatDate(poll.createdAt)}</span>
                            </div>
                        </div>
                    `;
                }).join('');

                // ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ Ï∂îÍ∞Ä
                container.querySelectorAll('.vote-list-item').forEach(item => {
                    item.addEventListener('click', () => {
                        this.selectPoll(parseInt(item.dataset.pollId));
                    });
                });
            }

            // Î©îÏù∏ ÏΩòÌÖêÏ∏† Î†åÎçîÎßÅ
            renderMainContent() {
                const container = document.getElementById('main-content');
                const poll = this.polls.find(p => p.id === this.currentPollId);

                if (!poll) {
                    container.innerHTML = `
                        <div class="welcome-screen">
                            <div class="welcome-icon">üó≥Ô∏è</div>
                            <h2 class="welcome-title">Choice Vote</h2>
                            <p class="welcome-text">Ï¢åÏ∏° Î™©Î°ùÏóêÏÑú Ìà¨ÌëúÎ•º ÏÑ†ÌÉùÌïòÍ±∞ÎÇò<br>ÏÉàÎ°úÏö¥ Ìà¨ÌëúÎ•º ÎßåÎì§Ïñ¥Î≥¥ÏÑ∏Ïöî!</p>
                            <button class="btn-new-vote" onclick="voteApp.openNewVoteModal()">
                                <span>‚ûï</span> Ïã†Í∑ú Ìà¨Ìëú ÎßåÎì§Í∏∞
                            </button>
                        </div>
                    `;
                    return;
                }

                const votesA = poll.votes.filter(v => v.option === 'a');
                const votesB = poll.votes.filter(v => v.option === 'b');
                const total = votesA.length + votesB.length;
                const percentA = total > 0 ? Math.round((votesA.length / total) * 100) : 50;
                const percentB = total > 0 ? 100 - percentA : 50;

                container.innerHTML = `
                    <div class="content-wrapper">
                        <!-- Header -->
                        <header class="vote-header">
                            <h1 class="vote-question">${this.escapeHtml(poll.question)}</h1>
                            <p class="vote-date">ÏÉùÏÑ±Ïùº: ${this.formatDateFull(poll.createdAt)}</p>
                        </header>

                        <!-- Vote Cards -->
                        <div class="vote-cards-wrapper">
                            <section class="vote-cards">
                                <div class="vote-card option-a" data-option="a">
                                    <span class="vote-card-icon">${poll.optionA.icon}</span>
                                    <h2 class="vote-card-title">${this.escapeHtml(poll.optionA.name)}</h2>
                                    <div class="vote-card-count">${votesA.length}</div>
                                    <div class="vote-card-percent">${percentA}%</div>
                                    <div class="vote-card-hint">üëÜ ÌÑ∞ÏπòÌïòÏó¨ Ìà¨Ìëú</div>
                                </div>
                                <div class="vote-card option-b" data-option="b">
                                    <span class="vote-card-icon">${poll.optionB.icon}</span>
                                    <h2 class="vote-card-title">${this.escapeHtml(poll.optionB.name)}</h2>
                                    <div class="vote-card-count">${votesB.length}</div>
                                    <div class="vote-card-percent">${percentB}%</div>
                                    <div class="vote-card-hint">üëÜ ÌÑ∞ÏπòÌïòÏó¨ Ìà¨Ìëú</div>
                                </div>
                            </section>
                            <div class="vs-badge">VS</div>
                        </div>

                        <!-- Progress Bar -->
                        <section class="progress-section">
                            <div class="progress-bar">
                                <div class="progress-fill option-a" style="width: ${percentA}%;">
                                    ${percentA >= 15 ? poll.optionA.name + ' ' + percentA + '%' : ''}
                                </div>
                                <div class="progress-fill option-b" style="width: ${percentB}%;">
                                    ${percentB >= 15 ? poll.optionB.name + ' ' + percentB + '%' : ''}
                                </div>
                            </div>
                            <div class="total-votes">Ï¥ù <strong>${total}</strong>Ìëú</div>
                        </section>

                        <!-- Comments - Ï¢åÏö∞ Î∂ÑÎ¶¨ -->
                        <section class="comments-section">
                            <div class="comments-column option-a">
                                <div class="comments-header">
                                    <span class="comments-header-icon">${poll.optionA.icon}</span>
                                    <span class="comments-header-title">${this.escapeHtml(poll.optionA.name)} ÏùòÍ≤¨</span>
                                    <span class="comments-header-count">${votesA.length}Î™Ö</span>
                                </div>
                                <div class="comments-list">
                                    ${votesA.length === 0 ? `
                                        <div class="empty-comments">ÏïÑÏßÅ ÏùòÍ≤¨Ïù¥ ÏóÜÏäµÎãàÎã§</div>
                                    ` : votesA.map(v => `
                                        <div class="comment-item">
                                            <div class="comment-name">${this.escapeHtml(v.name)}</div>
                                            <div class="comment-text">${this.escapeHtml(v.comment || '(ÏΩîÎ©òÌä∏ ÏóÜÏùå)')}</div>
                                            <div class="comment-date">${this.formatDate(v.timestamp)}</div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            <div class="comments-column option-b">
                                <div class="comments-header">
                                    <span class="comments-header-icon">${poll.optionB.icon}</span>
                                    <span class="comments-header-title">${this.escapeHtml(poll.optionB.name)} ÏùòÍ≤¨</span>
                                    <span class="comments-header-count">${votesB.length}Î™Ö</span>
                                </div>
                                <div class="comments-list">
                                    ${votesB.length === 0 ? `
                                        <div class="empty-comments">ÏïÑÏßÅ ÏùòÍ≤¨Ïù¥ ÏóÜÏäµÎãàÎã§</div>
                                    ` : votesB.map(v => `
                                        <div class="comment-item">
                                            <div class="comment-name">${this.escapeHtml(v.name)}</div>
                                            <div class="comment-text">${this.escapeHtml(v.comment || '(ÏΩîÎ©òÌä∏ ÏóÜÏùå)')}</div>
                                            <div class="comment-date">${this.formatDate(v.timestamp)}</div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </section>

                        <!-- Delete Button -->
                        <div style="margin-top: 30px; text-align: center;">
                            <button class="btn btn-delete" onclick="voteApp.deletePoll(${poll.id})" style="padding: 12px 30px;">
                                üóëÔ∏è Ïù¥ Ìà¨Ìëú ÏÇ≠Ï†ú
                            </button>
                        </div>
                    </div>
                `;

                // Ìà¨Ìëú Ïπ¥Îìú ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
                container.querySelectorAll('.vote-card').forEach(card => {
                    card.addEventListener('click', () => {
                        this.openVoteModal(card.dataset.option);
                    });
                });
            }

            // Ìà¨Ìëú ÏÑ†ÌÉù
            selectPoll(pollId) {
                this.currentPollId = pollId;
                this.saveData();
                this.render();
                
                // Î™®Î∞îÏùºÏóêÏÑú ÏÇ¨Ïù¥ÎìúÎ∞î Îã´Í∏∞
                document.getElementById('sidebar').classList.remove('open');
                document.getElementById('sidebar-backdrop').classList.remove('open');
            }

            // Ïã†Í∑ú Ìà¨Ìëú Î™®Îã¨ Ïó¥Í∏∞
            openNewVoteModal() {
                document.getElementById('vote-question').value = '';
                document.getElementById('option-a-name').value = '';
                document.getElementById('option-b-name').value = '';
                document.getElementById('new-vote-modal-overlay').classList.add('active');
                setTimeout(() => document.getElementById('vote-question').focus(), 100);
            }

            // Ïã†Í∑ú Ìà¨Ìëú Î™®Îã¨ Îã´Í∏∞
            closeNewVoteModal() {
                document.getElementById('new-vote-modal-overlay').classList.remove('active');
            }

            // Ïã†Í∑ú Ìà¨Ìëú ÏÉùÏÑ±
            createNewPoll() {
                const question = document.getElementById('vote-question').value.trim();
                const optionAName = document.getElementById('option-a-name').value.trim();
                const optionBName = document.getElementById('option-b-name').value.trim();

                if (!question) {
                    alert('ÏßàÎ¨∏ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!');
                    return;
                }
                if (!optionAName || !optionBName) {
                    alert('Îëê Í∞ÄÏßÄ ÏÑ†ÌÉùÏßÄÎ•º Î™®Îëê ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!');
                    return;
                }

                const newPoll = {
                    id: Date.now(),
                    question: question,
                    optionA: { name: optionAName, icon: this.selectedEmojiA },
                    optionB: { name: optionBName, icon: this.selectedEmojiB },
                    votes: [],
                    createdAt: Date.now()
                };

                this.polls.unshift(newPoll);
                this.currentPollId = newPoll.id;
                this.saveData();
                this.closeNewVoteModal();
                this.render();
            }

            // Ìà¨Ìëú ÏÇ≠Ï†ú
            deletePoll(pollId) {
                if (!confirm('Ï†ïÎßê Ïù¥ Ìà¨ÌëúÎ•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) return;
                
                this.polls = this.polls.filter(p => p.id !== pollId);
                this.currentPollId = this.polls.length > 0 ? this.polls[0].id : null;
                this.saveData();
                this.render();
            }

            // Ìà¨Ìëú Î™®Îã¨ Ïó¥Í∏∞
            openVoteModal(option) {
                const poll = this.polls.find(p => p.id === this.currentPollId);
                if (!poll) return;

                this.currentVoteOption = option;
                const modal = document.getElementById('vote-modal');
                const optionData = option === 'a' ? poll.optionA : poll.optionB;
                
                modal.className = 'modal option-' + option;
                document.getElementById('vote-modal-icon').textContent = optionData.icon;
                document.getElementById('vote-modal-title').textContent = optionData.name + 'Ïóê Ìà¨Ìëú';
                document.getElementById('voter-name').value = '';
                document.getElementById('voter-comment').value = '';
                document.getElementById('vote-modal-overlay').classList.add('active');
                
                setTimeout(() => document.getElementById('voter-name').focus(), 100);
            }

            // Ìà¨Ìëú Î™®Îã¨ Îã´Í∏∞
            closeVoteModal() {
                document.getElementById('vote-modal-overlay').classList.remove('active');
                this.currentVoteOption = null;
            }

            // Ìà¨Ìëú Ï†úÏ∂ú
            submitVote() {
                const name = document.getElementById('voter-name').value.trim();
                const comment = document.getElementById('voter-comment').value.trim();

                if (!name) {
                    alert('Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!');
                    return;
                }

                const poll = this.polls.find(p => p.id === this.currentPollId);
                if (!poll || !this.currentVoteOption) return;

                poll.votes.unshift({
                    id: Date.now(),
                    option: this.currentVoteOption,
                    name: name,
                    comment: comment,
                    timestamp: Date.now()
                });

                this.saveData();
                this.closeVoteModal();
                this.render();
            }

            // ÎÇ†Ïßú Ìè¨Îß∑
            formatDate(timestamp) {
                const date = new Date(timestamp);
                const now = new Date();
                const diff = now - date;

                if (diff < 60000) return 'Î∞©Í∏à Ï†Ñ';
                if (diff < 3600000) return Math.floor(diff / 60000) + 'Î∂Ñ Ï†Ñ';
                if (diff < 86400000) return Math.floor(diff / 3600000) + 'ÏãúÍ∞Ñ Ï†Ñ';
                return (date.getMonth() + 1) + '/' + date.getDate();
            }

            formatDateFull(timestamp) {
                const date = new Date(timestamp);
                return `${date.getFullYear()}. ${date.getMonth() + 1}. ${date.getDate()}`;
            }

            // HTML Ïù¥Ïä§ÏºÄÏù¥ÌîÑ
            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
        }

        // Ïï± Ï¥àÍ∏∞Ìôî
        let voteApp;
        document.addEventListener('DOMContentLoaded', () => {
            voteApp = new VoteApp();
        });
    </script>
</body>
</html>
